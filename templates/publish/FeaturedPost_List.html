
<!--ACA SE vera la lista de fotos destacadas de cada usuario-->

{% extends "base.html" %}<!--HEREDAMOS DE UNA PLATILLA LLAMADA base-->

{% load static %}


{% block title %} Featured posts {% endblock %}


{% block searchform %}
{% endblock searchform %}


{% block addgoogle %}
    {% if postings|length > 9 %}
        <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2662739673112516" crossorigin="anonymous"></script> -->
    {% endif %}
{% endblock addgoogle %}


{% block cssfiles %}


    <link rel="stylesheet" href="{% static 'css/home.css' %}" type="text/css" />

{% endblock cssfiles %} 


{% block content %}

    <div class="fixed-top d-flex flex-row justify-content-between border-bottom">
                            
        <div class="p-2">
            <a href="{{referer}}" class="link_icons">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                </svg>
            </a>
        </div>

        <div id="scroll_top" class="p-2 ml-5" style="color: black; font-size: 20px; cursor: pointer;">
            Featured list
        </div>
        {% if request.user == data_user %}
            <div class="p-2">
                <a href="{% url 'FeaturedPostCreateView' %}" class="link_icons">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-plus-circle-dotted" viewBox="0 0 16 16">
                        <path d="M8 0c-.176 0-.35.006-.523.017l.064.998a7.117 7.117 0 0 1 .918 0l.064-.998A8.113 8.113 0 0 0 8 0zM6.44.152c-.346.069-.684.16-1.012.27l.321.948c.287-.098.582-.177.884-.237L6.44.153zm4.132.271a7.946 7.946 0 0 0-1.011-.27l-.194.98c.302.06.597.14.884.237l.321-.947zm1.873.925a8 8 0 0 0-.906-.524l-.443.896c.275.136.54.29.793.459l.556-.831zM4.46.824c-.314.155-.616.33-.905.524l.556.83a7.07 7.07 0 0 1 .793-.458L4.46.824zM2.725 1.985c-.262.23-.51.478-.74.74l.752.66c.202-.23.418-.446.648-.648l-.66-.752zm11.29.74a8.058 8.058 0 0 0-.74-.74l-.66.752c.23.202.447.418.648.648l.752-.66zm1.161 1.735a7.98 7.98 0 0 0-.524-.905l-.83.556c.169.253.322.518.458.793l.896-.443zM1.348 3.555c-.194.289-.37.591-.524.906l.896.443c.136-.275.29-.54.459-.793l-.831-.556zM.423 5.428a7.945 7.945 0 0 0-.27 1.011l.98.194c.06-.302.14-.597.237-.884l-.947-.321zM15.848 6.44a7.943 7.943 0 0 0-.27-1.012l-.948.321c.098.287.177.582.237.884l.98-.194zM.017 7.477a8.113 8.113 0 0 0 0 1.046l.998-.064a7.117 7.117 0 0 1 0-.918l-.998-.064zM16 8a8.1 8.1 0 0 0-.017-.523l-.998.064a7.11 7.11 0 0 1 0 .918l.998.064A8.1 8.1 0 0 0 16 8zM.152 9.56c.069.346.16.684.27 1.012l.948-.321a6.944 6.944 0 0 1-.237-.884l-.98.194zm15.425 1.012c.112-.328.202-.666.27-1.011l-.98-.194c-.06.302-.14.597-.237.884l.947.321zM.824 11.54a8 8 0 0 0 .524.905l.83-.556a6.999 6.999 0 0 1-.458-.793l-.896.443zm13.828.905c.194-.289.37-.591.524-.906l-.896-.443c-.136.275-.29.54-.459.793l.831.556zm-12.667.83c.23.262.478.51.74.74l.66-.752a7.047 7.047 0 0 1-.648-.648l-.752.66zm11.29.74c.262-.23.51-.478.74-.74l-.752-.66c-.201.23-.418.447-.648.648l.66.752zm-1.735 1.161c.314-.155.616-.33.905-.524l-.556-.83a7.07 7.07 0 0 1-.793.458l.443.896zm-7.985-.524c.289.194.591.37.906.524l.443-.896a6.998 6.998 0 0 1-.793-.459l-.556.831zm1.873.925c.328.112.666.202 1.011.27l.194-.98a6.953 6.953 0 0 1-.884-.237l-.321.947zm4.132.271a7.944 7.944 0 0 0 1.012-.27l-.321-.948a6.954 6.954 0 0 1-.884.237l.194.98zm-2.083.135a8.1 8.1 0 0 0 1.046 0l-.064-.998a7.11 7.11 0 0 1-.918 0l-.064.998zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
                    </svg>
                </a>
            </div>
        {% else %}
            <div class="p-2">
                
            </div>
        {% endif %}
    </div>


    <br>

    {% if images %}<!--ENTRAMOS SOLO SI HAY POST-->

        {% for post in images %}<!--Recorremos todos los post-->
        <div id="div_1"> <!-- class="d-flex justify-content-center row" -->
            <div id="div_2"> <!-- class="col-6" -->

                <div class="mt-5">              
                    <div class="bg-white border">
                        <div>
                            <div class="d-flex flex-row justify-content-between align-items-center p-2 border-bottom">
                                <div class="d-flex flex-row align-items-center px-2">
                                    {% if post.user_post == user %}
                                        <a href="{% url 'myprofile'%}">
                                            <img src="{{ post.user_post.profile.photo.url }}" class="rounded-circle" width="30" height="30">
                                        </a>  
                                    {% else %}
                                        <a href="{{ post.user_post.profile.get_absolute_url }}">
                                            <img src="{{ post.user_post.profile.photo.url }}" class="rounded-circle" width="30" height="30">
                                        </a>
                                    {% endif %}
                                    <div class="d-flex flex-column flex-wrap ml-2">
                                        <span class="font-weight-bold">
                                            {% if post.user_post == user %}<!--si el usuario logeado mira su propia publicación entra aca para que los enlaces esten dirigidos a 'myprofile'-->
                                                <a class="some-links" href="{% url 'myprofile'%}">
                                                    <b>
                                                        {{ post.user_post }}
                                                    </b>
                                                    
                                                </a>        
                                            {% else %}<!--si el usuario logeado no es el dueño entramos aca y nos dan los enlaces a 'profile', que es la url-vista que se encarga de mostrar perfiles de usuarios que no sean el logeado-->
                                                <a class="some-links" href="{{ post.user_post.profile.get_absolute_url }}">
                                                    <b>
                                                        {{ post.user_post }}
                                                    </b>
                                                    
                                                </a>
                                            {% endif %}
                                        </span>
                                        
                                    </div>
                                </div>
                                <div class="px-2">
                                    <div class="dropdown show dropleft">
                                        <a class="link_icons" href="" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
                                                <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                                            </svg>
                                        </a>
                                    
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                            <a class="dropdown-item" href="{% url 'post-detail' post.id %}">
                                                Go to Post
                                            </a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="{% url 'Report_Post' post.id %}">
                                                Report post
                                            </a>
                                            
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                        <div class="block-image">
                            <img class="img-fluid" src="{{ post.pic.url }}">
                        </div>
                        <div class="d-flex justify-content-start options mt-2 ml-1">
                            {% if post in liked_post %}<!--nos fijamos si el user logeado le dio like al post-->
                                <i class="bi bi-ticket-perforated-fill"><!--LIKE-->
                                    <a class="like_suitcase_post there_is_like ml-1" href="{% url 'like' %}" id="{{ post.id }}">
                                        <svg id="svg_suitcase{{ post.id }}" version="1.1" viewBox="0.0 0.0 100.0 100.0" width="24" height="24"  fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
            
                                            <clipPath id="p.0">
                                                <path d="m0 0l100.0 0l0 100.0l-100.0 0l0 -100.0z" clip-rule="nonzero"/>
                                            </clipPath> 
                                        
                                            <g clip-path="url(#p.0)">
                                                <path fill="#000000" fill-opacity="0.0" d="m0 0l100.0 0l0 100.0l-100.0 0z" fill-rule="evenodd"/>
                                                <!-- El siguiente path es para el relleno: fill="#ed4956" -->
                                                <path id="path_post_heart_fill{{ post.id }}" fill="#ed4956" d="m50.0 27.220469c19.868767 -51.866142 97.35695 0 0 66.68504c-97.35696 -66.68504 -19.868767 -118.55118 0 -66.68504z" fill-rule="evenodd"/>
                                                <!-- El siguiente path es para la linea de contorno -->
                                                <path id="path_post_heart_stroke{{ post.id }}" stroke="#ed4956" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="m50.0 27.220469c19.868767 -51.866142 97.35695 0 0 66.68504c-97.35696 -66.68504 -19.868767 -118.55118 0 -66.68504z" fill-rule="evenodd"/>
                                            </g>
                                        
                                        </svg>     
                                    </a>
                                </i>
                            {% else %}
                                <i class="bi bi-ticket-perforated">
                                    <a class="like_suitcase_post there_is_not_like ml-1" href="{% url 'like' %}" id="{{ post.id }}">  
                                        <svg id="svg_suitcase{{ post.id }}" version="1.1" viewBox="0.0 0.0 100.0 100.0" width="24" height="24"  fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
            
                                            <clipPath id="p.0">
                                                <path d="m0 0l100.0 0l0 100.0l-100.0 0l0 -100.0z" clip-rule="nonzero"/>
                                            </clipPath> 
                                        
                                            <g clip-path="url(#p.0)">
                                                <path fill="#000000" fill-opacity="0.0" d="m0 0l100.0 0l0 100.0l-100.0 0z" fill-rule="evenodd"/>
                                                <!-- El siguiente path es para el relleno: fill="#ed4956" -->
                                                <path id="path_post_heart_fill{{ post.id }}" fill="white" d="m50.0 27.220469c19.868767 -51.866142 97.35695 0 0 66.68504c-97.35696 -66.68504 -19.868767 -118.55118 0 -66.68504z" fill-rule="evenodd"/>
                                                <!-- El siguiente path es para la linea de contorno -->
                                                <path id="path_post_heart_stroke{{ post.id }}" stroke="black" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="m50.0 27.220469c19.868767 -51.866142 97.35695 0 0 66.68504c-97.35696 -66.68504 -19.868767 -118.55118 0 -66.68504z" fill-rule="evenodd"/>
                                            </g>
                                        
                                        </svg> 
                                    </a>
                                </i>
                            {% endif %}
                            <i class="bi bi-pencil">
                                <a class="link_icons" href="{% url 'post-detail' post.id %}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                                        <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                                    </svg>
                                </a>
                            </i>

                            <!--FORMULARIO PARA COMPARTIR POST-->
                            <div class="dropdown show">
                                <a class="link_icons" href="" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-share" viewBox="0 0 16 16">
                                        <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>
                                    </svg>
                                </a>
                            
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                    <form action="{% url 'Share_Post' %}" method="POST">
                                        {% csrf_token %}
                                        <input name="sharing_post" id="Post_{{ post.id }}" value="{{ post.id }}" type="hidden">
                                        <button class="button-share">
                                            Share with followers
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between like-count ml-2 mr-2">
                            <span>
                                <a id="like{{post.id}}" class="some-links" href="{% url 'LikesListView' post.id %}">
                                    <span id="span_like{{post.id}}">
                                        {{ post.likes.count }}
                                    </span> Likes
                                </a>
                            </span>
                            <span class="text-primary">
                                Tags: {{ post.tags }}
                            </span>
                        </div>
                        <div class="block-body ml-2">
                            <span>
                                {% if post.user_post == user %}<!--si el usuario logeado mira su propia publicación entra aca para que los enlaces esten dirigidos a 'myprofile'-->
                                    <a class="some-links" href="{% url 'myprofile'%}">
                                        <b>
                                            {{ post.user_post }}
                                        </b>
                                        
                                    </a>        
                                {% else %}<!--si el usuario logeado no es el dueño entramos aca y nos dan los enlaces a 'profile', que es la url-vista que se encarga de mostrar perfiles de usuarios que no sean el logeado-->
                                    <a class="some-links" href="{{ post.user_post.profile.get_absolute_url }}">
                                        <b>
                                            {{ post.user_post }}
                                        </b>
                                        
                                    </a>
                                {% endif %}
                            </span>
                            <span style="color: rgb(26, 26, 26); font-size: 14px;">
                                {{ post.body }}
                            </span> 
                        </div>
                        <div class="comment-count ml-2">
                            <span>
                                <a class="some-links" href="{% url 'post-detail' post.id %}">
                                    {{ post.details.count }} Comments
                                </a>
                            </span>
                        </div>
                        <div class="comment-count ml-2">
                            <small class="text-muted">
                                Posted on {{ post.time_post }}
                            </small>
                        </div>
                    </div>
                </div>

            </div>
        </div> 
        {% endfor %}

    {% else %}
        <br><br>
        <h5>
            There aren't photos in this section, please add one, doing click in the superior right corner.
        </h5>
    {% endif %}



    <br>

    {% if images %}<!--Recorremos todos los post-->

        <div class="d-flex flex-row justify-content-center">
            <!--page_obj.has_previous: Verifica si hay una página anterior.-->
            <!--page_obj.has_next: Verifica si hay una página posterior.-->
            <!--page_obj.previous_page_number: Devuelve el número de la página anterior.-->
            <!--page_obj.next_page_number: Devuelve el número de la siguiente página.-->
            <!--page_obj.number: Devuelve el número de la página actual.-->
            <!--page_obj.paginator.num_pages: Devuelve el número total de páginas.-->
        
            {% if is_paginated %}<!--CREO QUE ENTRARA A ESTE IF SI HAY MAS DE 10 PUBLICACIONES QUE ES CUANDO SE NECESITARA MAS DE UNA PAGINA PARA MOSTRAR TODAS LAS PUBLICACIONES-->
        
                {% if page_obj.has_previous %}<!--ENTRA A ESTE IF SI LA PAGINA EN LA QUE ESTAMOS TIENE UNA PREVIA, O SEA ESTAMOS EN LA 2, ENTONCES ENTRARA PARA PODER VOLVER A LA PRIMERA-->
                    <!--LINK A LA PRIMERA PAGINA-->
                    <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
                    <!--LINK PARA IR A AL PAGINA ANTERIOR-->
                    <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Previous</a>
                {% endif %}
        
                {% for num in page_obj.paginator.page_range %}<!--este for es para que se muestren determinada cantidad de numeros de paginas a los lados del numero en que estamos, en este caso 3 de cada lado, por ejemplo si estamos en la pagina 6, se mostra lo sigueinte: previos-4-5-"6"-7-8-next-->
                    {% if page_obj.number == num %}<!--NOS FIJAMOS SI LA PAGINA ACTUAL ES IGUAL A num-->
                        <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
                    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                        <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
                    {% endif %}
                {% endfor %}
        
                {% if page_obj.has_next %}<!--VERIFICA SI HAY UNA PAGINA POSTERIOR, SI LA HAY, ENTRA-->
                    <!--LINK PARA ACCEDER A LA SIGUIENTE PAGINA-->
                    <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
                    <!---->
                    <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
                {% endif %}
        
            {% endif %}
        </div>

    {% endif %}

{% endblock %}


{% block jsfiles %}

    <script type="text/javascript" src="{% static 'js/like_post.js' %}"></script><!--Script para manejar eventos de touch sobre los paises.-->
    
    <script>
        //obtenemos el boton para cancelar restaurar los tutoriales:
        var title_Traveltry = document.getElementById("scroll_top");

        // When the user clicks on the button, open the modal
        title_Traveltry.onclick = function() {
            //window.scrollTo(0, 0);//este anda en mi celu
            window.scrollTo({ top: 0, behavior: 'smooth' });//este anda en la compu pero no en mi celu.
        }
        
    </script>
{% endblock jsfiles %}

